In order to typecheck files of this library...
*** Install ~agda --bridges~
~agda --bridges~ is an extension of cubical agda which add parametricity primitives to cubical type theory, as discussed in Cavallo-Harper (CH): https://arxiv.org/pdf/2005.11290.pdf. The implementation can be found here (bridges branch): https://github.com/antoinevanmuylder/agda/tree/bridges.
To install with stack:
#+begin_src shell
git clone https://github.com/antoinevanmuylder/agda/
cd agda/
git checkout bridges
sudo curl -sSL https://get.haskellstack.org/ | sh #if you don't have stack
stack update
cp stack-<version>.yaml stack.yaml # choose version of haskell compiler
stack install # builds and copies agda binary to ~/.local/bin/
              # alternatively: `stack install --fast`     (slower agda binary though)
              # `stack install` may take a while to get started
agda-mode compile && agda-mode setup #add hook to emacs init file
#+end_src
*** Download the cubical library and register it in =~/.agda/libraries=
Clone the appropriate repo: https://github.com/agda/cubical.
Once this is done, add the following line to your =~/.agda/libraries= config file:
#+begin_src shell
<...>/cubical/cubical.agda-lib # where cubical/ is stored in <...>
#+end_src
If you don't have a ~libraries~ file yet, create one.
*** /!\ Revert cubical
The latest version of the cubical library ("cubical") is currently not compatible with agda master.
A fix is to revert cubical to commit d29db7f5e6cfe5d. The command is:
#+begin_src shell
git checkout d29db7f5e6cfe5d # while in cubical/
#+end_src
*** Get rid of warnings
To get rid of the ~NoEquivWhenSplitting~ warnings generated by some files of the cubical library:
#+begin_src bash
M-x load-library RET agda2-mode RET
M-x customize-group RET agda2 RET
#+end_src
Then insert the following line in the ~Agda2 Program Args~ list:
#+begin_src bash
--warning=noNoEquivWhenSplitting
#+end_src
